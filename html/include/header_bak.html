<div id="skipNavigation">
    <ul>
        <li><a href="#content">본문 바로가기</a></li>
        <li><a href="#gnb">주메뉴 바로가기</a></li>
    </ul>
</div>
<div class="outer">
    <div class="inner">
        <div class="h-top-area">
            <div class="h-srch">
                <div class="srch-input-wrap">
                    <button type="submit" class="srch-bt">검색</button>
                    <div class="srch-input-area">
                        <input type="text" placeholder="검색어를 입력하세요" class="srch-input">
                        <button type="button" class="srch-close">닫기</button>
                    </div>
                </div>
            </div>
            <h1 id="logo"><a href="./index.html?folder=main&file=main">카우페스</a></h1>
            <div class="h-date">
                <span class="year">2018</span>
                <span class="bar"></span>
                <span class="month">03</span>
            </div>
        </div>
        <div class="h-bot-area">
            <ul class="h-sns-list">
                <li class="sns-01"><a href=""><span>인스타그램</span></a></li>
                <li class="sns-02"><a href=""><span>트위터</span></a></li>
                <li class="sns-03"><a href=""><span>페이스북</span></a></li>
                <li class="sns-04"><a href=""><span>메일</span></a></li>
            </ul>
            <nav id="gnb" role="navigation">
                <h2 class="hidden-txt">주메뉴</h2>
                <ul class="depth01-lists">
                    <li class="depth01-list">
                        <a href="#" class="depth01 active">통<span>通</span>하는</a>
                        <ul class="depth02-lists">
                            <li class="depth02-list">
                                <a href="#" class="depth02">
                                    <p class="label">[<span>Column</span>]</p>
                                    <p class="title">이달의 인물</p>
                                </a>
                            </li>
                            <li class="depth02-list">
                                <a href="#" class="depth02">
                                    <p class="label">[<span>Focus</span>]</p>
                                    <span class="title">지금 현대상선 I</span>
                                </a>
                            </li>
                            <li class="depth02-list">
                                <a href="#" class="depth02">
                                    <p class="label">[<span>Focus</span>]</p>
                                    <p class="title">지금 현대상선 II</p>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="depth01-list">
                        <a href="#" class="depth01">사람<span>人</span>들의</a>
                        <ul class="depth02-lists">
                            <li class="depth02-list">
                                <a href="#" class="depth02">
                                    <p class="label">[<span>Hobby</span>]</p>
                                    <p class="title">이달의 인물</p>
                                </a>
                            </li>
                            <li class="depth02-list">
                                <a href="#" class="depth02">
                                    <p class="label">[<span>People</span>]</p>
                                    <p class="title">지금 현대상선 I</p>
                                </a>
                            </li>
                            <li class="depth02-list">
                                <a href="#" class="depth02">
                                    <p class="label">[<span>People</span>]</p>
                                    <p class="title">지금 현대상선 II</p>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="depth01-list">
                        <a href="#" class="depth01">즐거움<span>樂</span></a>
                        <ul class="depth02-lists">
                            <li class="depth02-list">
                                <a href="#" class="depth02">
                                    <p class="label">[<span>PEOPLE</span>]</p>
                                    <p class="title">이달의 인물</p>
                                </a>
                            </li>
                            <li class="depth02-list">
                                <a href="#" class="depth02">
                                    <p class="label">[<span>PEOPLE</span>]</p>
                                    <p class="title">지금 현대상선 I</p>
                                </a>
                            </li>
                            <li class="depth02-list">
                                <a href="#" class="depth02">
                                    <p class="label">[<span>PEOPLE</span>]</p>
                                    <p class="title">지금 현대상선 II</p>
                                </a>
                            </li>
                            <li class="depth02-list">
                                <a href="#" class="depth02">
                                    <p class="label">[<span>PEOPLE</span>]</p>
                                    <p class="title">지금 현대상선 II</p>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>
            <div class="h-util">
                <a href="" class="compass-logo"><span>콤파스</span></a>
                <a class="menu-trigger" href="">
                    <span> </span>
                    <span> </span>
                    <span> </span>
                </a>
            </div>
        </div>
    </div>
</div>
<div id="siteMap" class="site-map">
    <div class="site-con">
        <dl>
            <dt><p>통<span>通</span>하는</p></dt>
            <dd>
                <a href="">
                    <div class="label"><p>[<span>Focus</span>]</p></div>
                    <div class="depth2-tit"><p>CEO 신년사</p></div>
                </a>
            </dd>
            <dd>
                <a href="">
                    <div class="label"><p>[<span>Focus</span>]</p></div>
                    <div class="depth2-tit"><p>CEO 신년사</p></div>
                </a>
            </dd>
            <dd>
                <a href="">
                    <div class="label"><p>[<span>Focus</span>]</p></div>
                    <div class="depth2-tit"><p>CEO 신년사</p></div>
                </a>
            </dd>
        </dl>
        <dl>
            <dt><p>통<span>通</span>하는</p></dt>
            <dd>
                <a href="">
                    <div class="label"><p>[<span>Focus</span>]</p></div>
                    <div class="depth2-tit"><p>CEO 신년사</p></div>
                </a>
            </dd>
            <dd>
                <a href="">
                    <div class="label"><p>[<span>Focus</span>]</p></div>
                    <div class="depth2-tit"><p>CEO 신년사</p></div>
                </a>
            </dd>
            <dd>
                <a href="">
                    <div class="label"><p>[<span>Focus</span>]</p></div>
                    <div class="depth2-tit"><p>CEO 신년사</p></div>
                </a>
            </dd>
        </dl>
        <dl>
            <dt><p>통<span>通</span>하는</p></dt>
            <dd>
                <a href="">
                    <div class="label"><p>[<span>Focus</span>]</p></div>
                    <div class="depth2-tit"><p>CEO 신년사</p></div>
                </a>
            </dd>
            <dd>
                <a href="">
                    <div class="label"><p>[<span>Focus</span>]</p></div>
                    <div class="depth2-tit"><p>CEO 신년사</p></div>
                </a>
            </dd>
            <dd>
                <a href="">
                    <div class="label"><p>[<span>Focus</span>]</p></div>
                    <div class="depth2-tit"><p>CEO 신년사</p></div>
                </a>
            </dd>
        </dl>
    </div>
</div>
<script>
    (function () {
        var es_step = "Expo.ease";
        var winHeight = $(window).height();
        var hHeight = $("#header").outerHeight();
        var $siteMap = $(".site-map");
        var scrollMove = false;

        // 사이트맵 초기화
        $siteMap.css({
            height:winHeight - hHeight,
            top:-(winHeight - hHeight*2) - 2
        });

        $(".srch-bt").on("click", function(){
            TweenMax.to( $(this), .3, {left:20, ease:es_step});
            TweenMax.to( $(".srch-input-wrap"), .3, {width:330, ease:es_step, onComplete:function(){
                $(".srch-input-area").addClass("active");
            }});
        });
        $(".srch-close").on("click", function(){
            $(".srch-input-area").removeClass("active");
            TweenMax.to( $(".srch-bt"), .3, {left:0, ease:es_step});
            TweenMax.to( $(".srch-input-wrap"), .1, {width:0, ease:es_step});
        });

        $(".depth01-list").on("mouseenter", function(){
            $(this).addClass("active");
        });
        $(".depth01-list").on("mouseleave", function(){
            $(this).removeClass("active");
        });

        $siteMap.find("dl").on("mouseenter", function(){
            $(this).addClass("active");
        });
        $siteMap.find("dl").on("mouseleave", function(){
            $(this).removeClass("active");
        });

        var allMenu = false;
        var yPosition = "";
        $(".menu-trigger").on("click", function(){
            $('html, body').animate({ scrollTop: yPosition }, 0.1);
            if ( $(window).scrollTop() >= 90 ){ // 스크롤 내렸을 때 전체메뉴
                if( allMenu == false ){
                    hHeight = $("#header").outerHeight();
                    winHeight = $(window).height();
                    $siteMap.css({
                        height:winHeight - 49
                    });
                    yPosition = $(window).scrollTop();
                    $("#header .outer").css("top",-91)
                    $(this).removeClass("inactive").addClass("active");
                    $("body").css({
                        height: winHeight,
                        overflow:"hidden"
                    });
                    TweenMax.to( $siteMap, .3, {top:49, ease:es_step, onComplete:function(){
                        $siteMap.addClass("zIndex");
                    }});
                    allMenu = true;
                }
            } else {
                if( allMenu == false ){
                    hHeight = $("#header").outerHeight();
                    winHeight = $(window).height();
                    yPosition = $(window).scrollTop();
                    $siteMap.css({
                        height:winHeight - 141
                    });
                    $(this).removeClass("inactive").addClass("active");
                    $("body").css({
                        height: winHeight,
                        overflow:"hidden"
                    });
                    TweenMax.to( $siteMap, .3, {top:141, ease:es_step, onComplete:function(){
                        $siteMap.addClass("zIndex");
                    }});
                    allMenu = true;
                    console.log("3")
                } else {
                    hHeight = $("#header").outerHeight();
                    winHeight = $(window).height();
                    $siteMap.css({
                        height:winHeight - hHeight
                    });
                    $("#header .outer").css("top",0)
                    $(this).removeClass("active").addClass("inactive");
                    $("body").css({
                        height: "auto",
                        overflow:"visible"
                    });
                    $siteMap.removeClass("zIndex");
                    TweenMax.to( $siteMap, .6, {top:-winHeight, ease:es_step});
                    allMenu = false;
                    console.log("4")
                }
            }
            return false;
        });

        $(window).scroll(function(){
            winHeight = $(window).height();
            hHeight = $("#header").outerHeight();
            $siteMap.css({
                height:winHeight - hHeight
            });
            if ( allMenu == true ){
                $("body").css({
                    height: winHeight,
                    overflow:"hidden"
                });
            } else {
                $siteMap.css({
                    height:winHeight - hHeight,
                    top:-winHeight + hHeight
                });
            }
            if ( $(window).scrollTop() >= 90 ){
                $("#header").addClass("scroll");
                $(".h-top-area").css("display","none")
                $siteMap.css({
                    height:winHeight - hHeight*2,
                    top:-(winHeight - 148)
                });
                scrollMove = true;
            } else {
                $(".h-top-area").css("display","block")
                $("#header").removeClass("scroll");
                scrollMove = false;
            }
        })

        $(window).resize(function(){
            hHeight = $("#header").outerHeight();
            winHeight = $(window).height();
            if ( allMenu == true ){
                $("body").css({
                    height: winHeight,
                    overflow:"hidden"
                });
            } else {
                $siteMap.css({
                    height:winHeight,
                    top:-winHeight
                });
            }
        })
    })();
</script>